<!-- ================== EDITABLE SECTION ================== -->
<script>
const navData = [
  // Single page (no group)
  { type: "page", name: "Home", link: "index.html" },

  // Group with main pages, sub pages, sub-sub pages
  { type: "group", name: "Our Services", items: [
      { type: "page", name: "Food & Drinks", link: "food.html", sub: [
          { type: "page", name: "Food", link: "food-only.html", sub: [
              { type: "page", name: "Rice", link: "rice.html" },
              { type: "page", name: "Snacks", link: "snacks.html" }
          ]},
          { type: "page", name: "Drinks", link: "drinks.html" }
      ]},
      { type: "page", name: "Fashion", link: "fashion.html" },
      { type: "page", name: "Events", link: "events.html" },
      { type: "page", name: "Accommodation", link: "accommodation.html" }
  ]},

  // Other single pages
  { type: "page", name: "About Us", link: "about.html" },
  { type: "page", name: "Contact", link: "contact.html" }
];
</script>
<!-- =============== END OF EDITABLE SECTION =============== -->

<!-- Styles for nav (keeps spacing, animation, active color) -->
<style>
  /* base */
  #navList { list-style:none; padding:0; margin:0; font-size:18px; color:white; }

  /* link style & slide-in animation */
  #navList a.nav-link {
    display:block;
    color: white;
    text-decoration: none;
    padding: 10px 12px;
    opacity: 0;
    transform: translateX(30px);
    transition: all 0.35s ease;
  }

  /* when panel has class menu-open, nav items slide in */
  #sideNav.menu-open #navList a.nav-link {
    opacity: 1;
    transform: translateX(0);
  }

  /* spacing */
  #navList li { margin-bottom: 10px; }

  /* sublists */
  #navList ul.submenu { display: none; padding-left: 14px; margin-top: 6px; list-style:none; }

  /* dropdown toggle style (group or parent with children) */
  #navList .dropdown-toggle {
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: white;
    padding: 8px 12px;
  }

  /* arrow rotation */
  #navList .arrow { transition: transform 0.25s ease; }
  #navList li.open > .dropdown-toggle .arrow { transform: rotate(90deg); }

  /* active highlight (red-pink) */
  #navList a.nav-link.active,
  #navList .toggle-text.active {
    color: #ff4d6d;
    font-weight: 600;
  }

  /* ensure toggle-text (the clickable text inside toggles) looks like links */
  #navList .toggle-text { color: inherit; text-decoration: none; }
</style>

<!-- Navigation container -->
<ul id="navList"></ul>

<script>
// ========== MENU BUILDER (reads navData and renders nested menu) ==========
function buildMenu(items, parentUl) {
  items.forEach(item => {
    const li = document.createElement('li');

    // PAGE
    if (item.type === "page") {
      if (item.sub && item.sub.length > 0) {
        // page that has children: render a toggle (no direct link)
        const toggle = document.createElement('div');
        toggle.className = "dropdown-toggle";
        toggle.innerHTML = `
          <span class="toggle-text">${item.name}</span>
          <span class="arrow">&#8250;</span>
        `;
        li.appendChild(toggle);

        const subUl = document.createElement('ul');
        subUl.className = "submenu";
        buildMenu(item.sub, subUl);
        li.appendChild(subUl);
      } else {
        // simple page link
        const a = document.createElement('a');
        a.className = "nav-link";
        a.href = item.link || "#";
        a.textContent = item.name;
        li.appendChild(a);
      }
    }

    // GROUP (a named collection; behaves like a top-level toggle)
    if (item.type === "group") {
      const toggle = document.createElement('div');
      toggle.className = "dropdown-toggle";
      toggle.innerHTML = `
        <span class="toggle-text">${item.name}</span>
        <span class="arrow">&#8250;</span>
      `;
      // visually weight group titles a bit
      toggle.style.fontWeight = "700";
      li.appendChild(toggle);

      const groupUl = document.createElement('ul');
      groupUl.className = "submenu";
      buildMenu(item.items || [], groupUl);
      li.appendChild(groupUl);
    }

    parentUl.appendChild(li);
  });
}

// Render navigation
const navList = document.getElementById('navList');
buildMenu(navData, navList);

// ========== DROPDOWN + ACTIVE HANDLERS ==========
function initDropdowns() {
  // toggles
  const toggles = navList.querySelectorAll('.dropdown-toggle');
  toggles.forEach(toggle => {
    // remove old handler if re-initializing
    if (toggle._handler) toggle.removeEventListener('click', toggle._handler);

    const handler = function() {
      const li = this.parentElement;
      const submenu = li.querySelector('.submenu');
      const arrow = this.querySelector('.arrow');
      const text = this.querySelector('.toggle-text');

      const isOpen = li.classList.toggle('open');
      if (submenu) submenu.style.display = isOpen ? 'block' : 'none';
      if (arrow) arrow.innerHTML = isOpen ? '&#709;' : '&#8250;';

      // mark toggle text active (and remove active from links)
      clearActiveMarks();
      if (text) text.classList.toggle('active', isOpen);
    };

    toggle._handler = handler;
    toggle.addEventListener('click', handler);
  });

  // link click => set active
  const links = navList.querySelectorAll('a.nav-link');
  links.forEach(a => {
    if (a._handler) a.removeEventListener('click', a._handler);
    const handler = function(e) {
      clearActiveMarks();
      this.classList.add('active');
      // optionally close the nav when a link is clicked (commented out)
      // closeNav();
    };
    a._handler = handler;
    a.addEventListener('click', handler);
  });
}

// helper to clear active classes from links & toggles
function clearActiveMarks() {
  navList.querySelectorAll('a.nav-link').forEach(x => x.classList.remove('active'));
  navList.querySelectorAll('.toggle-text').forEach(x => x.classList.remove('active'));
}

// initialize
initDropdowns();
</script>
