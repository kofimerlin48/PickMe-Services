<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Groceries â€“ PickMe Services</title>

<!-- LOAD CSS (CORRECT PATH WITH CAPITAL G) -->
<link rel="stylesheet" href="/Groceries/groceries.css">

</head>

<body class="hide-initial">

<!-- HEADER PLACEHOLDER (MOVED OUTSIDE HEAD TO FIX BLANK PAGE) -->
<div id="header-placeholder"></div>

<script>
(async () => {
  try {
    const response = await fetch('/header.html');
    if (!response.ok) throw new Error("Failed to load header");
    const html = await response.text();
    document.getElementById("header-placeholder").innerHTML = html;
  } catch (err) {
    console.error(err);
  }
})();
</script>

<!-- ===================== PAGE HEADER ===================== -->
<div class="page-header">
  <h1>Groceries</h1>
  <p>Find grocery shops around you and send your list</p>
</div>

<!-- Add Shop Button -->
<div class="add-shop-wrap">
  <button id="openShopBtn">ðŸ›’ Add your grocery shop</button>
</div>

<!-- Search -->
<div class="search-bar">
  <input type="text" id="searchInput" placeholder="Search grocery shops...">
</div>

<!-- Category Tabs -->
<div class="tabs">
  <div class="tab active" data-cat="All">All</div>
  <div class="tab" data-cat="Stores">Stores</div>
  <div class="tab" data-cat="Supermarkets">Supermarkets</div>
  <div class="tab" data-cat="Market">Market</div>
</div>

<!-- Cards -->
<div id="cardsContainer" class="cards-container"></div>

<!-- ===== DETAILS PANEL ===== -->
<div id="detailsPanel">
  <button id="detailsBackBtn">&times;</button>

  <section class="banner" id="detailsBanner">
    <div class="banner-text">
      <h2>Welcome to</h2>
      <h1 id="shopName"></h1>
      <p id="shopSlogan"></p>
    </div>
  </section>

  <div class="details-content">
    <div class="section-title">Sample of items sold</div>

    <div class="carousel" id="carousel"></div>
    <div class="dots" id="dots"></div>

    <div class="action-row">
      <button class="btn-primary" id="openFormBtn">+ Add Items to your list</button>
    </div>
  </div>
</div>

<!-- ===== ITEM FORM MODAL ===== -->
<div class="modal" id="formModal">
  <div class="modal-box">
    <h3>List your items</h3>

    <div id="itemsHolder"></div>

    <button class="btn-primary" id="addRowBtn">Add item</button>

    <div class="form-group">
      <label>Your full name</label>
      <input type="text" id="customerName">
    </div>

    <div class="form-group">
      <label>Your phone number</label>
      <input type="tel" id="customerPhone">
    </div>

    <button class="btn-primary" id="submitBtn">Submit</button>
    <button class="btn-primary" id="cancelBtn" style="background:#777">Cancel</button>

    <div id="formError" class="error"></div>
  </div>
</div>

<!-- ===== MODE SELECTION MODAL ===== -->
<div class="modal" id="chooseModeModal">
  <div class="modal-box">
    <h3>Add items to your list</h3>

    <button class="mode-btn" id="modeTypeBtn">Type items yourself</button>
    <button class="mode-btn" id="modeSelectBtn">Select from shop list</button>
    <button class="btn-primary" id="modeCancelBtn" style="background:#777">Cancel</button>
  </div>
</div>

<!-- ===== CATALOG MODAL ===== -->
<div class="modal" id="catalogModal">
  <div class="modal-box">
    <h3>Shop items</h3>

    <input type="text" id="catalogSearch" placeholder="Search items...">
    <div id="catalogList"></div>

    <button class="btn-primary" id="catalogDoneBtn">Add selected</button>
    <button class="btn-primary" id="catalogCancelBtn" style="background:#777">Cancel</button>

    <div style="margin-top:10px;">Selected: <span id="catalogSelectedCount">0</span></div>
  </div>
</div>

<!-- ===== SHOP FORM MODAL ===== -->
<div class="modal" id="shopModal">
  <div class="modal-box">
    <h3>Add your grocery shop</h3>

    <div class="form-group">
      <label>Owner full name</label>
      <input type="text" id="ownerName">
    </div>

    <div class="form-group">
      <label>Owner phone</label>
      <input type="tel" id="ownerPhone">
    </div>

    <div class="form-group">
      <label>Shop name</label>
      <input type="text" id="shopNameInput">
    </div>

    <div class="form-group">
      <label>Slogan</label>
      <input type="text" id="shopSloganInput">
    </div>

    <div class="form-group">
      <label>Description</label>
      <textarea id="shopShortDesc"></textarea>
    </div>

    <div class="form-group">
      <label>Category</label>
      <select id="shopCategory">
        <option value="">Select category</option>
        <option value="Stores">Stores</option>
        <option value="Supermarkets">Supermarkets</option>
        <option value="Market">Market</option>
      </select>
    </div>

    <div class="form-group">
      <label>Subscription plan</label>
      <select id="shopPlan">
        <option value="">Select plan</option>
        <option value="1m_50">1 Month 50</option>
        <option value="3m_100">3 Months 100</option>
        <option value="6m_200">6 Months 200</option>
        <option value="12m_300">1 Year 300</option>
      </select>
    </div>

    <div class="form-group">
      <label>Main Image</label>
      <input type="file" id="shopMainImage" accept="image/*">
    </div>

    <div class="form-group">
      <label>Sample Images (max 5)</label>
      <input type="file" id="shopSampleImages" accept="image/*" multiple>
    </div>

    <button id="shopSubmitBtn" class="btn-primary">Submit</button>
    <button id="shopCancelBtn" class="btn-primary" style="background:#777">Cancel</button>

    <div id="shopError" class="error"></div>
  </div>
</div>

<!-- ===== WAITING MODAL ===== -->
<div class="modal" id="waitingModal">
  <div class="modal-box">
    <h3>We are confirming your prices</h3>
    <p>Please wait <span id="waitingDots"></span></p>
    <div class="waiting-bar">
      <div id="waitingProgressBar" class="waiting-bar-fill"></div>
    </div>
    <p id="waitingCounter">0 of 0 items reviewed</p>

    <button id="waitingBtn" class="btn-primary" style="display:none;">View reviewed list</button>
  </div>
</div>

<!-- Panels -->
<div id="adminPanel"></div>
<div id="customerPanel"></div>

<!-- FOOTER -->
<div class="footer-wrap">
  <iframe src="/footer.html" style="width:100%;height:60px;border:none;"></iframe>
</div>

<!-- LOAD JS (CORRECT PATH WITH CAPITAL G) -->
<script type="module" src="/Groceries/groceries.js"></script>

</body>
</html>
